{"version":3,"file":"table.js","sources":["../../../../../../packages/components/table/src/table.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"tableWrapper\"\n    :class=\"[\n      {\n        [ns.m('fit')]: fit,\n        [ns.m('striped')]: stripe,\n        [ns.m('border')]: border || isGroup,\n        [ns.m('hidden')]: isHidden,\n        [ns.m('group')]: isGroup,\n        [ns.m('fluid-height')]: maxHeight,\n        [ns.m('scrollable-x')]: layout.scrollX.value,\n        [ns.m('scrollable-y')]: layout.scrollY.value,\n        [ns.m('enable-row-hover')]: !store.states.isComplex.value,\n        [ns.m('enable-row-transition')]:\n          (store.states.data.value || []).length !== 0 &&\n          (store.states.data.value || []).length < 100,\n        'has-footer': showSummary,\n      },\n      ns.m(tableSize),\n      className,\n      ns.b(),\n      ns.m(`layout-${tableLayout}`),\n    ]\"\n    :style=\"style\"\n    :data-prefix=\"ns.namespace.value\"\n    @mouseleave=\"handleMouseLeave()\"\n  >\n    <div :class=\"ns.e('inner-wrapper')\">\n      <div ref=\"hiddenColumns\" class=\"hidden-columns\">\n        <slot></slot>\n      </div>\n      <div\n        v-if=\"showHeader && tableLayout === 'fixed'\"\n        ref=\"headerWrapper\"\n        v-mousewheel=\"handleHeaderFooterMousewheel\"\n        :class=\"ns.e('header-wrapper')\"\n      >\n        <table\n          ref=\"tableHeader\"\n          :class=\"ns.e('header')\"\n          :style=\"tableBodyStyles\"\n          border=\"0\"\n          cellpadding=\"0\"\n          cellspacing=\"0\"\n        >\n          <hColgroup\n            :columns=\"store.states.columns.value\"\n            :table-layout=\"tableLayout\"\n          ></hColgroup>\n          <table-header\n            ref=\"tableHeaderRef\"\n            :border=\"border\"\n            :default-sort=\"defaultSort\"\n            :store=\"store\"\n            @set-drag-visible=\"setDragVisible\"\n          />\n        </table>\n      </div>\n      <div ref=\"bodyWrapper\" :style=\"bodyHeight\" :class=\"ns.e('body-wrapper')\">\n        <el-scrollbar\n          ref=\"scrollWrapper\"\n          :height=\"maxHeight ? undefined : height\"\n          :max-height=\"maxHeight ? height : undefined\"\n        >\n          <table\n            ref=\"tableBody\"\n            :class=\"ns.e('body')\"\n            cellspacing=\"0\"\n            cellpadding=\"0\"\n            border=\"0\"\n            :style=\"{\n              width: bodyWidth,\n              tableLayout,\n            }\"\n          >\n            <hColgroup\n              :columns=\"store.states.columns.value\"\n              :table-layout=\"tableLayout\"\n            ></hColgroup>\n            <table-header\n              v-if=\"showHeader && tableLayout === 'auto'\"\n              :border=\"border\"\n              :default-sort=\"defaultSort\"\n              :store=\"store\"\n              @set-drag-visible=\"setDragVisible\"\n            />\n            <table-body\n              :context=\"context\"\n              :highlight=\"highlightCurrentRow\"\n              :row-class-name=\"rowClassName\"\n              :tooltip-effect=\"tooltipEffect\"\n              :row-style=\"rowStyle\"\n              :store=\"store\"\n              :stripe=\"stripe\"\n            />\n          </table>\n          <div\n            v-if=\"isEmpty\"\n            ref=\"emptyBlock\"\n            :style=\"emptyBlockStyle\"\n            :class=\"ns.e('empty-block')\"\n          >\n            <span :class=\"ns.e('empty-text')\">\n              <slot name=\"empty\">{{ computedEmptyText }}</slot>\n            </span>\n          </div>\n          <div\n            v-if=\"$slots.append\"\n            ref=\"appendWrapper\"\n            :class=\"ns.e('append-wrapper')\"\n          >\n            <slot name=\"append\"></slot>\n          </div>\n        </el-scrollbar>\n      </div>\n      <div v-if=\"border || isGroup\" :class=\"ns.e('border-left-patch')\"></div>\n    </div>\n    <div\n      v-if=\"showSummary\"\n      v-show=\"!isEmpty\"\n      ref=\"footerWrapper\"\n      v-mousewheel=\"handleHeaderFooterMousewheel\"\n      :class=\"ns.e('footer-wrapper')\"\n    >\n      <table-footer\n        :border=\"border\"\n        :default-sort=\"defaultSort\"\n        :store=\"store\"\n        :style=\"tableBodyStyles\"\n        :sum-text=\"computedSumText\"\n        :summary-method=\"summaryMethod\"\n      />\n    </div>\n    <div\n      v-show=\"resizeProxyVisible\"\n      ref=\"resizeProxy\"\n      :class=\"ns.e('column-resize-proxy')\"\n    ></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, getCurrentInstance, computed, provide } from 'vue'\nimport { debounce } from 'lodash-unified'\nimport { Mousewheel } from '@element-plus/directives'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport ElScrollbar from '@element-plus/components/scrollbar'\nimport { createStore } from './store/helper'\nimport TableLayout from './table-layout'\nimport TableHeader from './table-header'\nimport TableBody from './table-body'\nimport TableFooter from './table-footer'\nimport useUtils from './table/utils-helper'\nimport useStyle from './table/style-helper'\nimport defaultProps from './table/defaults'\nimport { TABLE_INJECTION_KEY } from './tokens'\nimport { hColgroup } from './h-helper'\n\nimport type { Table } from './table/defaults'\n\nlet tableIdSeed = 1\nexport default defineComponent({\n  name: 'ElTable',\n  directives: {\n    Mousewheel,\n  },\n  components: {\n    TableHeader,\n    TableBody,\n    TableFooter,\n    ElScrollbar,\n    hColgroup,\n  },\n  props: defaultProps,\n  emits: [\n    'select',\n    'select-all',\n    'selection-change',\n    'cell-mouse-enter',\n    'cell-mouse-leave',\n    'cell-contextmenu',\n    'cell-click',\n    'cell-dblclick',\n    'row-click',\n    'row-contextmenu',\n    'row-dblclick',\n    'header-click',\n    'header-contextmenu',\n    'sort-change',\n    'filter-change',\n    'current-change',\n    'header-dragend',\n    'expand-change',\n  ],\n  setup(props) {\n    type Row = typeof props.data[number]\n    const { t } = useLocale()\n    const ns = useNamespace('table')\n    const table = getCurrentInstance() as Table<Row>\n    provide(TABLE_INJECTION_KEY, table)\n    const store = createStore<Row>(table, props)\n    table.store = store\n    const layout = new TableLayout<Row>({\n      store: table.store,\n      table,\n      fit: props.fit,\n      showHeader: props.showHeader,\n    })\n    table.layout = layout\n\n    const isEmpty = computed(() => (store.states.data.value || []).length === 0)\n\n    /**\n     * open functions\n     */\n    const {\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      sort,\n    } = useUtils<Row>(store)\n    const {\n      isHidden,\n      renderExpanded,\n      setDragVisible,\n      isGroup,\n      handleMouseLeave,\n      handleHeaderFooterMousewheel,\n      tableSize,\n      bodyHeight,\n      height,\n      emptyBlockStyle,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      resizeProxyVisible,\n      bodyWidth,\n      resizeState,\n      doLayout,\n      tableBodyStyles,\n      tableLayout,\n    } = useStyle<Row>(props, layout, store, table)\n\n    const debouncedUpdateLayout = debounce(doLayout, 50)\n\n    const tableId = `el-table_${tableIdSeed++}`\n    table.tableId = tableId\n    table.state = {\n      isGroup,\n      resizeState,\n      doLayout,\n      debouncedUpdateLayout,\n    }\n    const computedSumText = computed(\n      () => props.sumText || t('el.table.sumText')\n    )\n\n    const computedEmptyText = computed(() => {\n      return props.emptyText || t('el.table.emptyText')\n    })\n\n    return {\n      ns,\n      layout,\n      store,\n      handleHeaderFooterMousewheel,\n      handleMouseLeave,\n      tableId,\n      tableSize,\n      isHidden,\n      isEmpty,\n      renderExpanded,\n      resizeProxyVisible,\n      resizeState,\n      isGroup,\n      bodyWidth,\n      bodyHeight,\n      height,\n      tableBodyStyles,\n      emptyBlockStyle,\n      debouncedUpdateLayout,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      doLayout,\n      sort,\n      t,\n      setDragVisible,\n      context: table,\n      computedSumText,\n      computedEmptyText,\n      tableLayout,\n    }\n  },\n})\n</script>\n"],"names":["defineComponent","Mousewheel","TableHeader","TableBody","TableFooter","ElScrollbar","hColgroup","defaultProps","useLocale","useNamespace","getCurrentInstance","TABLE_INJECTION_KEY","createStore","TableLayout","computed","useUtils","tableLayout","useStyle","debounce","_createElementBlock","_normalizeClass","_normalizeStyle","_createElementVNode","_renderSlot","_createVNode","_createBlock"],"mappings":"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"}